@{
    ViewData["Title"] = "Stock";
}

<div class="shadow-all-sides p-3 d-flex flex-column align-items-center gap-3">
    <div class="d-flex justify-content-between w-100">
        <div class="d-flex gap-2">
            <a class="d-flex gap-2 px-3 align-items-center bg-white text-decoration-none text-black" 
                asp-controller="Stock" asp-action="Stock"
                style="border:none; border-bottom: 2px solid #0d6efd">
                <i class="fs-6 bi-cash-stack"></i> 
                Stock
            </a>
            <a class="d-flex gap-2 px-3 align-items-center bg-white text-decoration-none text-black" 
                asp-controller="Stock" asp-action="Expenses" 
                style="border:none">
                <i class="fs-6 bi-wallet2"></i> 
                Expenses
            </a>
        </div>

        <div class="d-flex gap-3">
            <i class="fs-5 bi-printer"></i> 
            <i class="fs-5 bi-arrow-clockwise"></i> 
            <i class="fs-5 bi-fullscreen"></i> 
        </div>
    </div>

    <div class="d-flex flex-row w-100" >
        <input type="text" class="form-control" style="width: 300px;" required/>
        <button class="border bg-white">
            <i class="bi bi-search"></i>
        </button>
    </div>

    <table class="table table-striped" style="width: 100%; table-layout: fixed;">
        <thead class="table-dark">
            <tr>
                <th class="font-small" scope="col" style="width: 40px;">#</th>
                <th class="font-small" scope="col" style="width: 150px;">ITEM</th>
                <th class="font-small text-center" scope="col">TYPE</th>
                <th class="font-small text-center" scope="col">IN</th>
                <th class="font-small text-center" scope="col">OUT</th>
                <th class="font-small text-center" scope="col">ON HAND</th>
                <th class="font-small text-center" scope="col">WORTH</th>
                <th class="font-small text-center" scope="col">ACTION</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="font-small" scope="row">1</td>
                <td class="font-small" scope="row">5 Gallon Slim</td>
                <td class="font-small text-center">
                    <div class="bg-success text-white px-2 d-inline rounded-pill">Customer</div>
                </td>
                <td class="font-small text-center">500</td>
                <td class="font-small text-center">7</td>
                <td class="font-small text-center">499</td>
                <td class="font-small text-center">63,500.00</td>
                <td class="text-center">
                    <div class="dropdown">
                        <button class="btn btn-danger dropdown-toggle" type="button" data-bs-toggle="dropdown">
                            <i class="bi bi-gear"></i>
                        </button>
                        <ul class="dropdown-menu">
                            <li>
                                <div class="dropdown-item" id="openStockInModal">
                                    <i class="bi bi-box-arrow-in-down"></i> Stock in
                                </div>
                            </li>
                            <li>
                                <div class="dropdown-item" id="openStockOutModal">
                                    <i class="bi bi-box-arrow-up"></i> Stock out
                                </div>
                            </li>
                            <hr class="m-1"/>
                             <li>
                                <div class="dropdown-item" id="openStockHistoryModal">
                                    <i class="bi bi-clock-history"></i> History
                                </div>
                            </li>

                        </ul>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>  

    <nav aria-label="Pagination">
        <ul class="pagination">
            <li class="page-item ">
                <a class="page-link text-black" 
                    href="/Search?page=1&window=1&search=John&gender=Male">
                    Previous
                </a>
            </li>

            <li class="page-item">
                <a class="page-link text-black" href="/Search?page=6&window=2&search=John&gender=Male">6</a>
            </li>
            <li class="page-item active">
                <a class="page-link text-black" href="/Search?page=7&window=2&search=John&gender=Male">7</a>
            </li>
            <li class="page-item">
                <a class="page-link text-black" href="/Search?page=8&window=2&search=John&gender=Male">8</a>
            </li>
            <li class="page-item">
                <a class="page-link text-black" href="/Search?page=9&window=2&search=John&gender=Male">9</a>
            </li>
            <li class="page-item">
                <a class="page-link text-black" href="/Search?page=10&window=2&search=John&gender=Male">10</a>
            </li>

            <li class="page-item">
                <a class="page-link text-black" 
                    href="/Search?page=11&window=3&search=John&gender=Male">
                    Next
                </a>
            </li>
        </ul>
    </nav>
    
</div>


<div id="stockInContainer"></div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const button = document.getElementById("openStockInModal");
        const container = document.getElementById("stockInContainer");

        button.addEventListener("click", function (){
            fetch("/Stock/StockIn")
                .then(response => response.text())
                .then(html => {
                    container.innerHTML = html;
                    const modal = document.getElementById("stockInModal");
                    if(modal) {
                        const modalInstance = new bootstrap.Modal(modal);
                        modalInstance.show();
                    }
                })
                .catch(error => {
                    console.error("Error loading modal:", error);
                });
             });
         });
</script>

<div id="stockOutContainer"></div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const button = document.getElementById("openStockOutModal");
        const container = document.getElementById("stockOutContainer");

        button.addEventListener("click", function (){
            fetch("/Stock/StockOut")
                .then(response => response.text())
                .then(html => {
                    container.innerHTML = html;
                    const modal = document.getElementById("stockOutModal");
                    if(modal) {
                        const modalInstance = new bootstrap.Modal(modal);
                        modalInstance.show();
                    }
                })
                .catch(error => {
                    console.error("Error loading modal:", error);
                });
             });
         });
</script>


<div id="stockHistoryContainer"></div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const button = document.getElementById("openStockHistoryModal");
        const container = document.getElementById("stockHistoryContainer");

        button.addEventListener("click", function (){
            fetch("/Stock/StockHistory")
                .then(response => response.text())
                .then(html => {
                    container.innerHTML = html;
                    const modal = document.getElementById("stockHistoryModal");
                    if(modal) {
                        const modalInstance = new bootstrap.Modal(modal);
                        modalInstance.show();
                    }
                })
                .catch(error => {
                    console.error("Error loading modal:", error);
                });
             });
         });
</script>


